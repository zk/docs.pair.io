<!DOCTYPE html>
<html><head><title>docs.pair.io</title><link href="/css/reset.css" rel="stylesheet" /><link href="/css/text.css" rel="stylesheet" /><link href="/css/960.css" rel="stylesheet" /><link href="/css/main.css" rel="stylesheet" /></head><body><div class="container_16"><div class="grid_16"><div class="header"><h1>docs.pair.io</h1></div></div></div><div class="clear"></div><div class="container_16 content_wrapper"><div class="grid_14 prefix_1 suffix_1"><div class="grid_10 alpha"><div class="content"><h1>Instance Config</h1>

<p>Instance config is the <em>what</em> you're spinning up: server size and type
(arch), firewall config, operating system, etc.</p>

<p><a name="quickstarts"></a></p>

<h2>Quickstarts</h2>

<p>Quickstarts are designed to get you up and working quickly on your
repository.  They are images built with sensible default for their
respective language stacks, and can be used to quickly launch a repo
that dosen't have a <code>$REPO/.pair.io/config.yaml</code>.</p>

<p>You can force a particular quickstart by adding the following to your
<code>config.yaml</code>:</p>

<pre><code># Force ruby quickstart
quickstart: ruby19 # | clojure | rails3 | nodejs
</code></pre>

<p><a name="config-yaml"></a></p>

<h2>Config.yaml</h2>

<p>Pair.io looks for a config.yaml file in the <code>.pair.io</code> directory of
your repository.  This config file allows you to specify what to
launch and provision.</p>

<p>There are four core key-value pairs that are required by pair.io
to configure your instance:</p>

<ul>
<li><code>image-id</code> - The AMI id.</li>
<li><code>size</code> - Size of the server. Valid values at this time are <code>micro</code>,
<code>small</code>, and <code>large</code>, and correspond to AWS sizes t1.micro,
m1.small, and m1.large.</li>
<li><code>inbound-ports</code> - Firewall configuration. A list of integers, or
strings denoting which inbound ports to make accessable.  See below
for string format.</li>
<li><code>provision</code> - What to do to configure your instance.  Valid values
at this time are <code>none</code>, <code>sh</code>, <del><code>chef</code></del>,
<del><code>pallet</code></del>, and <del><code>puppet</code></del>.</li>
</ul>

<p class="aside">
   3rd party provisioners are temporarily disabled. Working on a fix.
</p>

<p>All other configuration options (such as <code>quickstart: ruby19</code> above)
are sugar for specifying the above.</p>

<ul>
<li><code>quickstart: ruby19</code> - Use quickstart.</li>
</ul>

<p><a name="pairio-images"></a></p>

<h2>Pair.io Images</h2>

<p>You have the option to create an image from a running dev instance at
any time.  This lets you achieve short launch times while still
retaining full control over the configuration of your instance.</p>

<p>See <a href="/imaging.html">imaging your instance</a> for more information.</p>

<p><a name="instance-hooks"></a></p>

<h2>Instance Hooks</h2>

<p>If found, pair.io will run the script found at <code>/etc/pair.io/hooks/instance-user</code> 
as root with <code>$1</code> set to the user's login.  You can use this script to set up user
specific state, such as initializing rvm builds or seed the user's 
<code>.m2/repository</code>.</p>

<p>The following example seeds a user's m2 repo:</p>

<pre><code>#!/bin/sh

LOGIN=$1

cp -R /etc/pair.io/.m2 /home/$LOGIN/
chown -R $LOGIN:$LOGIN /home/$LOGIN/.m2
</code></pre>

<p>Unsuccessful execution of this script (exit code != 0) will result in printing the
output of the failed run to the log on your session page, and can be used for 
debugging (or, you could just run it yourself prior to imaging).</p>

<p><a name="example-config-file"></a></p>

<h2>Example Config File</h2>

<p>Precedence: <code>quickstart</code> -> <code>pairio-image</code> -> rest.</p>

<pre><code class="small">
# $REPO/.pair.io/config.yaml

# Quickstarts
# Quickstarts override all required keys (image-id, size,
# inbound-ports, and provision)
quickstart: empty # | ruby19 | rails3 | nodejs | clojure

# Pair.io gives you fine-grained control over what we provision for
# you. Here are the full set of config options:

image-id: ami-1aad5273 # must be in the us-east-1 region
size: large # micro | small | large
inbound-ports: 
  - 22  # Make sure you've got 22 so pair can connect
        # to your instance.
  - 80
  - 81
  - "tcp:1.2.3.4/32:443"
  - "udp:0.0.0.0/0:1234"
provision: none

</code></pre>
</div></div><div class="grid_4 omega"><div class="nav"><ul><li><a href="/">Why pair.io?</a></li><li><a href="/pairio-in-5-minutes.html">Pair.io in 5 min: Clojure</a></li><li><a href="/pairio-in-5-minutes-ruby.html">Pair.io in 5 min: Ruby</a></li><li><a href="/instance-config.html">Instance Config</a></li><li><a href="/imaging.html">Imaging Your Instance</a></li><li><a href="/collaboration.html">Collaboration</a></li><li><a href="/faq.html">FAQ</a></li><li><a href="/changelog.html">Changelog</a></li></ul><hr><ul><li><a href="https://pair.io">Back to pair.io</a></li></ul><hr><p>Please help us improve this site. Repo's <a href="https://github.com/zkim/docs.pair.io">here</a>.</p><p>Thanks to <a href="https://github.com">GitHub</a> you can even edit these pages <a href="https://github.com/zkim/docs.pair.io/blob/master/resources/pages/index.md">right in your browser.</a></p></div></div></div><div class="grid_16"><div class="footer">Please <a href="https://github.com/zkim/docs.pair.io/issues">open up an issue</a> on this site's <a href="https://github.com/zkim/docs.pair.io">github page</a> if any of the info here is confusing or could be improved.</div></div><div class="clear"></div></div></body></html>